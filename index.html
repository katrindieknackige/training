<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimierter Halbmarathon Planer 2:10h</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FAFAF9; /* stone-50 */
            color: #44403C; /* stone-700 */
        }

        /* Custom Scrollbar for Timeline */
        .timeline-scroll::-webkit-scrollbar {
            height: 8px;
        }
        .timeline-scroll::-webkit-scrollbar-track {
            background: #E7E5E4; /* stone-200 */
            border-radius: 4px;
        }
        .timeline-scroll::-webkit-scrollbar-thumb {
            background: #A8A29E; /* stone-400 */
            border-radius: 4px;
        }
        .timeline-scroll::-webkit-scrollbar-thumb:hover {
            background: #78716C; /* stone-500 */
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 300px;
            margin: 0 auto;
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        .phase-indicator.active {
            border-bottom: 3px solid #0D9488; /* teal-600 */
            color: #0F766E; /* teal-700 */
            font-weight: 700;
        }
        
        .abc-item {
            position: relative;
            padding-left: 1.5rem;
        }
        .abc-item::before {
            content: attr(data-index);
            position: absolute;
            left: 0;
            top: 0;
            font-size: 1.25rem;
            font-weight: 700;
            color: #0D9488; /* teal-600 */
            line-height: 1.5rem;
        }
    </style>
</head>
<body class="bg-stone-50 min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-stone-800 tracking-tight">üèÉ‚Äç‚ôÄÔ∏è Katrins Halbmarathon-Trainingsplan</h1>
                <p class="text-sm text-stone-500">Gut geplant ist halb gelaufen</p>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium text-stone-600">
                <!-- Buttons, die scrollToSection nutzen, M√úSSEN zu einer existierenden ID springen -->
                <button onclick="scrollToSection('schedule')" class="hover:text-teal-600 transition">Trainingsplan</button>
                <button onclick="scrollToSection('exercise-guide-container')" class="hover:text-teal-600 transition">√úbungsanleitung</button>
                <button onclick="scrollToSection('running-drills')" class="hover:text-teal-600 transition">Lauf-ABC</button>
                <button onclick="scrollToSection('analytics')" class="hover:text-teal-600 transition">Analyse</button>
                <button onclick="scrollToSection('health')" class="hover:text-teal-600 transition">Gesundheit & Core</button>
            </div>
        </div>
    </header>

    <main class="flex-grow w-full max-w-6xl mx-auto px-4 py-8 space-y-12">

        <!-- Intro / Overview Cards -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-teal-500">
                <h3 class="text-stone-500 text-sm font-semibold uppercase tracking-wider mb-2">Zielzeit</h3>
                <div class="flex items-baseline">
                    <span class="text-4xl font-bold text-stone-800">2:10</span>
                    <span class="text-lg text-stone-500 ml-1">h</span>
                </div>
                <p class="text-sm text-stone-400 mt-2">Pace: ~6:09 min/km</p>
            </div>
            <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-orange-400">
                <h3 class="text-stone-500 text-sm font-semibold uppercase tracking-wider mb-2">Fokus</h3>
                <div class="text-xl font-bold text-stone-800">Stabilit√§t & Pr√§vention</div>
                <p class="text-sm text-stone-400 mt-2">Knie (H√ºfte) & LW1 (Core)</p>
            </div>
            <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-indigo-400">
                <h3 class="text-stone-500 text-sm font-semibold uppercase tracking-wider mb-2">Balance</h3>
                <div class="text-xl font-bold text-stone-800">Laufen + Passion</div>
                <p class="text-sm text-stone-400 mt-2">Handstand & Bouldern integriert</p>
            </div>
        </section>

        <!-- Interactive Schedule Section -->
        <section id="schedule" class="scroll-mt-24">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-stone-800">Dein Trainingsplan</h2>
                <p class="text-stone-600 mt-2">W√§hle eine Woche aus, um die detaillierten Einheiten zu sehen. Der Plan ist in zwei Hauptphasen unterteilt: Basis & Volumenaufbau, gefolgt von Spezifik & Tapering. Hier findest du nun alle Kraft√ºbungen direkt aufgeschl√ºsselt.</p>
            </div>

            <!-- Timeline Navigator -->
            <div class="bg-white rounded-xl card-shadow p-4 mb-8">
                <div class="flex justify-between items-center mb-4 border-b border-stone-100 pb-2">
                    <span class="text-xs font-bold uppercase text-stone-400">Phase 1: Basis & Technik</span>
                    <span class="text-xs font-bold uppercase text-stone-400">Phase 2: Spezifik & Taper</span>
                </div>
                <div class="timeline-scroll flex gap-3 overflow-x-auto pb-4 snap-x">
                    <!-- JS will populate buttons here -->
                </div>
            </div>

            <!-- Active Week Detail View -->
            <div id="week-detail-container" class="bg-white rounded-xl card-shadow overflow-hidden transition-all duration-300">
                <!-- Content injected via JS -->
            </div>
        </section>
        
        <!-- Exercise Guide Section -->
        <section id="exercise-guide-container" class="scroll-mt-24 pt-8">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-stone-800">üõ†Ô∏è Anleitung: Kraft√ºbungen (Woche <span id="guide-week-number">1</span>)</h2>
                <p class="text-stone-600 mt-2">Hier findest du eine kurze, anf√§ngerfreundliche Beschreibung zu jeder Kraft√ºbung, die in der ausgew√§hlten Woche auf deinem Plan steht. **Technik geht immer vor Gewicht!**</p>
            </div>

            <div id="exercise-guide-cards" class="grid grid-cols-1 md:grid-cols-2 gap-6 transition-opacity duration-300">
                <!-- Exercise details injected here -->
            </div>
        </section>
        
        <!-- NEW: Running Drills (Lauf-ABC) Section -->
        <section id="running-drills" class="scroll-mt-24 pt-8">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-stone-800">üöÄ Lauf-ABC: Der Koordinationsturbo</h2>
                <p class="text-stone-600 mt-2">Das Lauf-ABC verbessert deine √ñkonomie, Schrittfrequenz und Technik. Absolviere es **1-2x pro Woche** (ideal vor den Intervallen/Tempol√§ufen) auf einer Strecke von ca. 20-30m.</p>
            </div>

            <!-- Top 10 Drills -->
            <div class="bg-white p-6 rounded-xl card-shadow mb-8 border-l-4 border-teal-500">
                <h3 class="text-xl font-bold text-stone-800 mb-4 flex items-center gap-2">
                    <span class="text-2xl">üîü</span> Die 10 wichtigsten Lauf-ABC-√úbungen
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                    <!-- 1. Anfersen -->
                    <div class="abc-item" data-index="1.">
                        <h4 class="font-semibold text-stone-700 mb-1">Anfersen (Butt Kicks)</h4>
                        <p class="text-xs text-stone-500 mb-2">Aktiviert Beinbeuger, verbessert Fu√ür√ºckf√ºhrung.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Ferse zieht aktiv Richtung Ges√§√ü. Kleiner Schritt, hoher Rhythmus.</li>
                            <li><strong>Cues:</strong> H√ºfte stabil halten. Knie bleibt leicht vorne.</li>
                            <li><strong>Fehler:</strong> Zu gro√üe Schritte, Hohlkreuz.</li>
                        </ul>
                        <div class="mt-2 text-center"></div>
                    </div>
                    <!-- 2. Kniehebelauf -->
                    <div class="abc-item" data-index="2.">
                        <h4 class="font-semibold text-stone-700 mb-1">Kniehebelauf (High Knees)</h4>
                        <p class="text-xs text-stone-500 mb-2">Trainiert H√ºftbeuger, Core, Laufschrittkoordination.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Knie bis H√ºfth√∂he. Arme aktiv im Laufrhythmus.</li>
                            <li><strong>Cues:</strong> Aufrecht, Rippen "runter". Fu√ü setzt unter K√∂rperschwerpunkt auf.</li>
                            <li><strong>Fehler:</strong> Nach hinten lehnen, Knie zu hoch (‚Üí Hohlkreuz).</li>
                        </ul>
                        <div class="mt-2 text-center"></div>
                    </div>
                    <!-- 3. Skippings -->
                    <div class="abc-item" data-index="3.">
                        <h4 class="font-semibold text-stone-700 mb-1">Skippings (Mini-Kniehebelauf)</h4>
                        <p class="text-xs text-stone-500 mb-2">F√∂rdert Schrittfrequenz und Reaktivkraft.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Winzige Schritte mit hoher Frequenz (150‚Äì170/min).</li>
                            <li><strong>Cues:</strong> Spannung im Core. Schneller Fu√üwechsel.</li>
                            <li><strong>Fehler:</strong> Schlurfen, F√º√üe zu lange am Boden.</li>
                        </ul>
                    </div>
                    <!-- 4. Fu√ügelenksarbeit -->
                    <div class="abc-item" data-index="4.">
                        <h4 class="font-semibold text-stone-700 mb-1">Fu√ügelenksarbeit</h4>
                        <p class="text-xs text-stone-500 mb-2">K√ºrzere Bodenkontaktzeit, Stiffness in Achilles/Wade.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Kleine Spr√ºnge nur aus dem Fu√ügelenk. Knie fast gestreckt.</li>
                            <li><strong>Cues:</strong> Ferse kurz in der Luft. K√∂rperspannung.</li>
                            <li><strong>Fehler:</strong> Nach vorne kippen, "stampfen".</li>
                        </ul>
                    </div>
                    <!-- 5. Hopserlauf -->
                    <div class="abc-item" data-index="5.">
                        <h4 class="font-semibold text-stone-700 mb-1">Hopserlauf (leicht, k√∂rperschonend)</h4>
                        <p class="text-xs text-stone-500 mb-2">Aufbau von Kraft, H√ºftextension und Abdruck.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Langer Schritt, federnd. Arme aktiv. **KEINE hohen Spr√ºnge.**</li>
                            <li><strong>Cues:</strong> Weich landen. H√ºfte streckt sich nach vorne.</li>
                            <li><strong>Fehler:</strong> Zu hart oder zu hoch springen, Hohlkreuz.</li>
                        </ul>
                    </div>
                    <!-- 6. √úberkreuzlauf -->
                    <div class="abc-item" data-index="6.">
                        <h4 class="font-semibold text-stone-700 mb-1">√úberkreuzlauf (Grapevine)</h4>
                        <p class="text-xs text-stone-500 mb-2">F√∂rdert H√ºftmobilit√§t und Koordination.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Seitlich laufen, ein Bein vor das andere setzen. Rhythmus konstant halten.</li>
                            <li><strong>Cues:</strong> Brust zeigt nach vorne (nicht verdrehen!). H√ºfte stabil.</li>
                            <li><strong>Fehler:</strong> Zu schnell, Oberk√∂rper verdreht sich.</li>
                        </ul>
                    </div>
                    <!-- 7. Seitgalopp -->
                    <div class="abc-item" data-index="7.">
                        <h4 class="font-semibold text-stone-700 mb-1">Seitgalopp (Side Shuffle)</h4>
                        <p class="text-xs text-stone-500 mb-2">St√§rkt Gluteus Medius, Abduktoren (wichtig f√ºr Knie!).</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Halbe Squat-Position. Seitlich schieben, nicht h√ºpfen.</li>
                            <li><strong>Cues:</strong> Knie leicht nach au√üen. H√ºfte ruhig halten.</li>
                            <li><strong>Fehler:</strong> Knie kollabiert nach innen (Valgus), Oberk√∂rper zu tief.</li>
                        </ul>
                    </div>
                    <!-- 8. R√ºckw√§rtslauf -->
                    <div class="abc-item" data-index="8.">
                        <h4 class="font-semibold text-stone-700 mb-1">R√ºckw√§rtslauf (Locker Trab)</h4>
                        <p class="text-xs text-stone-500 mb-2">Gut f√ºr Kniegesundheit, exzentrische Quadrizeps-Kraft.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Ganz locker r√ºckw√§rts traben. Kleine Schritte.</li>
                            <li><strong>Cues:</strong> Blick √ºber Schulter. Knie nicht durchstrecken.</li>
                            <li><strong>Fehler:</strong> Zu gro√üe Schritte (Stolpergefahr), Hohlkreuz.</li>
                        </ul>
                    </div>
                    <!-- 9. Sprunglauf -->
                    <div class="abc-item" data-index="9.">
                        <h4 class="font-semibold text-stone-700 mb-1">Sprunglauf (gleitend, reduziert)</h4>
                        <p class="text-xs text-stone-500 mb-2">Erh√∂ht Abdruckkraft ohne vertikalen Stress.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> Langer Schritt. Gleitende, weiche Landung.</li>
                            <li><strong>Cues:</strong> H√ºfte vorne halten. Knie stabil.</li>
                            <li><strong>Fehler:</strong> Zu viel vertikal (hohe Spr√ºnge), lautes Landen.</li>
                        </ul>
                    </div>
                    <!-- 10. Steigerungsl√§ufe -->
                    <div class="abc-item" data-index="10.">
                        <h4 class="font-semibold text-stone-700 mb-1">Steigerungsl√§ufe (Strides)</h4>
                        <p class="text-xs text-stone-500 mb-2">Verbessert Schrittl√§nge, Frequenz und Lockerheit.</p>
                        <ul class="list-disc list-inside text-sm text-stone-600 space-y-0.5 ml-2">
                            <li><strong>Ausf√ºhrung:</strong> 60‚Äì100 m oder 15‚Äì20 s. Steigern bis max. 85 % Tempo, dann locker auslaufen.</li>
                            <li><strong>Cues:</strong> Schultern entspannt. F√º√üe "schnell leicht".</li>
                            <li><strong>Fehler:</strong> Sprinten (zu hart), Schultern hochziehen.</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Variants -->
            <div class="bg-white p-6 rounded-xl card-shadow mb-8">
                <h3 class="text-xl font-bold text-stone-800 mb-4 flex items-center gap-2">
                    <span class="text-2xl">üìã</span> Dein Komplettes Lauf-ABC: Varianten
                </h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">
                        <h4 class="font-bold text-lg text-teal-600 mb-2">‚≠ê Variante A (10 Minuten)</h4>
                        <p class="text-sm text-stone-600 mb-3">**Kurz & knackig** - ideal vor Tempol√§ufen oder wenn wenig Zeit ist.</p>
                        <ul class="text-sm text-stone-700 space-y-1">
                            <li>20 m Fu√ügelenksarbeit</li>
                            <li>20 m Skippings</li>
                            <li>20 m Kniehebelauf</li>
                            <li>20 m Anfersen</li>
                            <li>20 m Seitgalopp (rechts + links)</li>
                            <li>20 m √úberkreuzlauf</li>
                            <li>2√ó Steigerungsl√§ufe √† 15 s</li>
                        </ul>
                    </div>
                    <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">
                        <h4 class="font-bold text-lg text-teal-600 mb-2">‚≠ê‚≠ê Variante B (15 Minuten)</h4>
                        <p class="text-sm text-stone-600 mb-3">**Standard-Routine** - perfekt f√ºr die Dienstags-Intervall-Tage.</p>
                        <ul class="text-sm text-stone-700 space-y-1">
                            <li>25 m Fu√ügelenksarbeit</li>
                            <li>25 m Skippings</li>
                            <li>25 m Kniehebelauf</li>
                            <li>25 m Anfersen</li>
                            <li>25 m Hopserlauf (leicht)</li>
                            <li>25 m √úberkreuzlauf</li>
                            <li>25 m Seitgalopp (rechts + links)</li>
                            <li>3√ó Steigerungsl√§ufe √† 15‚Äì20 s</li>
                        </ul>
                    </div>
                    <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">
                        <h4 class="font-bold text-lg text-teal-600 mb-2">‚≠ê‚≠ê‚≠ê Variante C (20 Minuten)</h4>
                        <p class="text-sm text-stone-600 mb-3">**Intensiv-Training** - f√ºr maximales √ñkonomietraining.</p>
                        <ul class="text-sm text-stone-700 space-y-1">
                            <li>2√ó 20 m Fu√ügelenksarbeit</li>
                            <li>2√ó 20 m Skippings</li>
                            <li>2√ó 20 m Kniehebelauf</li>
                            <li>2√ó 20 m Anfersen</li>
                            <li>2√ó 20 m Hopserlauf (leicht)</li>
                            <li>20 m R√ºckw√§rtslauf</li>
                            <li>20 m √úberkreuzlauf</li>
                            <li>20 m Seitgalopp (je Seite)</li>
                            <li>4√ó Steigerungsl√§ufe √† 20 s</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Safety & Integration -->
            <div class="bg-red-50 p-6 rounded-xl card-shadow border-l-4 border-red-500">
                <h3 class="text-xl font-bold text-red-800 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üö®</span> Sicherheitshinweise (Knie & Gleitwirbel)
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-stone-700">
                    <div>
                        <p class="font-semibold text-stone-800 mb-2">Wie oft?</p>
                        <ul class="list-disc list-inside space-y-1 ml-2">
                            <li>**1√ó pro Woche (Dienstag):** Pflicht vor der Tempo-Einheit.</li>
                            <li>**2√ó pro Woche (Di. + So.):** Ideal zur Optimierung.</li>
                        </ul>
                    </div>
                    <div>
                        <p class="font-semibold text-stone-800 mb-2">Sichere Ausf√ºhrung f√ºr dich:</p>
                        <ul class="list-disc list-inside space-y-1 ml-2">
                            <li>**Core-Spannung:** IMMER halten, um ein Hohlkreuz zu vermeiden (LW1-Schutz).</li>
                            <li>**Hopserlauf:** Nur gleitend, keine explosiven Spr√ºnge! (Knie/R√ºcken-Schutz).</li>
                            <li>**Fu√üaufsatz:** Achte bei Kniehebelauf/Skippings auf das Landen unter dem K√∂rperschwerpunkt.</li>
                            <li>**Seitgalopp:** Super wichtig! St√§rkt Gluteus Medius (Knie-Achse).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <!-- END NEW RUNNING DRILLS SECTION -->

        <!-- Analytics Section -->
        <section id="analytics" class="scroll-mt-24 pt-8">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-stone-800">Trainingsanalyse</h2>
                <p class="text-stone-600 mt-2">Verstehe die Struktur deines Trainings. Wir bauen das Volumen langsam auf, um Verletzungen zu vermeiden, und nutzen spezifische Paces f√ºr den Wettkampferfolg.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Long Run Chart -->
                <div class="bg-white p-6 rounded-xl card-shadow">
                    <h3 class="text-lg font-bold text-stone-800 mb-4">Progression: Langer Lauf (So)</h3>
                    <div class="chart-container">
                        <canvas id="longRunChart"></canvas>
                    </div>
                    <p class="text-xs text-stone-400 mt-4 text-center">Ziel: Sicherer Aufbau bis 20km (Woche 12), dann Tapering.</p>
                </div>

                <!-- Pace Zones Chart -->
                <div class="bg-white p-6 rounded-xl card-shadow">
                    <h3 class="text-lg font-bold text-stone-800 mb-4">Deine Pace Zonen</h3>
                    <div class="chart-container">
                        <canvas id="paceChart"></canvas>
                    </div>
                    <p class="text-xs text-stone-400 mt-4 text-center">Wichtig: Der Gro√üteil des Trainings (Langer Lauf) findet langsam statt!</p>
                </div>
            </div>
        </section>

        <!-- Health & Prevention Hub -->
        <section id="health" class="scroll-mt-24 pt-8 bg-stone-100 p-8 rounded-2xl border border-stone-200">
            <div class="mb-8 text-center max-w-2xl mx-auto">
                <h2 class="text-2xl font-bold text-stone-800">üõ°Ô∏è Verletzungspr√§vention & K√∂rper</h2>
                <p class="text-stone-600 mt-2">Aufgrund deiner Historie (Gleitwirbel LW1, Knieschmerzen) sind diese Regeln nicht verhandelbar. Integriere sie in jede Routine.</p>
            </div>

            <!-- Changed to lg:grid-cols-4 to accommodate the new card -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Knee Safety -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-teal-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-2xl">ü¶µ</span>
                        <h3 class="font-bold text-stone-800">Knie-Schutz</h3>
                    </div>
                    <p class="text-sm text-stone-600 mb-4">Ursache f√ºr Schmerzen ab km 7 ist oft eine instabile H√ºfte.</p>
                    <ul class="text-sm space-y-2 text-stone-700">
                        <li class="flex items-start gap-2">
                            <span class="text-teal-500 font-bold">‚úì</span>
                            <span><strong>Gluteus Medius:</strong> Immer Clamshells oder Lateral Band Walks ins Warm-up.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-teal-500 font-bold">‚úì</span>
                            <span><strong>3 S√§tze:</strong> Konsequent vor/nach dem Studio-Training.</span>
                        </li>
                    </ul>
                </div>

                <!-- Back Safety -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-orange-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-2xl">ü¶¥</span>
                        <h3 class="font-bold text-stone-800">R√ºcken (LW1)</h3>
                    </div>
                    <p class="text-sm text-stone-600 mb-4">Stabilit√§t statt Bewegung in der Lendenwirbels√§ule.</p>
                    <ul class="text-sm space-y-2 text-stone-700">
                        <li class="flex items-start gap-2">
                            <span class="text-orange-500 font-bold">!</span>
                            <span><strong>Kein Hohlkreuz:</strong> Vermeide √úberstreckung bei Overhead-√úbungen.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-teal-500 font-bold">‚úì</span>
                            <span><strong>Anti-Rotation:</strong> Pallof Press ist dein bester Freund.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-teal-500 font-bold">‚úì</span>
                            <span><strong>Anti-Extension:</strong> Dead Bugs & Planks.</span>
                        </li>
                    </ul>
                </div>

                <!-- Training Logic -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-indigo-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-2xl">‚öñÔ∏è</span>
                        <h3 class="font-bold text-stone-800">Balance & Technik</h3>
                    </div>
                    <p class="text-sm text-stone-600 mb-4">Technik vor Gewicht, besonders bei Freihanteln.</p>
                    <ul class="text-sm space-y-2 text-stone-700">
                        <li class="flex items-start gap-2">
                            <span class="text-teal-500 font-bold">‚úì</span>
                            <span><strong>Start leicht:</strong> Squats/Deadlifts erst nur mit K√∂rpergewicht/Stange.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-teal-500 font-bold">‚úì</span>
                            <span><strong>4. Einheit:</strong> Ist flexibel! Bouldern ersetzt das Home-Workout.</span>
                        </li>
                    </ul>
                </div>

                <!-- NEW: Handstand Mini-Plan -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-purple-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-2xl">ü§∏</span>
                        <h3 class="font-bold text-stone-800">Dein Handstand-Miniplan</h3>
                    </div>
                    <p class="text-sm text-stone-600 mb-4">2‚Äì4 Min pro Tag, komplett optional. Fokus auf Hohlkreuz-Vermeidung.</p>
                    <ul class="text-sm space-y-2 text-stone-700">
                        <li class="flex items-start gap-2">
                            <span class="text-purple-500 font-bold">1.</span>
                            <span><strong>Wandhandstand (30s):</strong> Bauch zur Wand (weniger Hohlkreuz), 20‚Äì30 s.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-purple-500 font-bold">2.</span>
                            <span><strong>Kick-Ups:</strong> 3‚Äì5 kontrollierte Versuche zum Finden des Gleichgewichts.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-purple-500 font-bold">3.</span>
                            <span><strong>Tuck-Hold:</strong> 10‚Äì15 s im Hocke- oder Tuck-Handstand halten.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-purple-500 font-bold">4.</span>
                            <span><strong>Line Drills:</strong> 2‚Äì3 S√§tze: Rippen runter, Spannung (Hohlkreuz-Korrektur).</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-stone-200 mt-12 py-8">
        <div class="max-w-6xl mx-auto px-4 text-center text-stone-400 text-sm">
            <p>¬© 2025 Personalisierter Halbmarathon Planer. Bleib gesund und hab Spa√ü!</p>
        </div>
    </footer>

    <script>
        // --- DATA STORAGE ---
        // Data derived directly from the "trainingsplan.md" source report. Detailed strength exercises added to 'studio' field.
        const weeksData = [
            // Phase 1: Basis
            { id: 1, dist: 10, phase: 'Basis', ll: '10 km @ 7:00‚Äì7:30/km', studio: 'IV: 6√ó2 min @ 5:35/km. Pause: 2 min Gehen/Trab. Kraft: Goblet Squat 3√ó12, Hip Thrust 3√ó12, Ruderzug 3√ó12, Clamshells 3√ó15.', runYoga: '5 km locker + 20 min H√ºft√∂ffner', opt: 'Handstand: Wrist Warm-up + 3√ó20s Wall Hold', note: 'Start sanft. Fokus auf saubere Ausf√ºhrung.' },
            { id: 2, dist: 11, phase: 'Basis', ll: '11 km @ 7:00‚Äì7:30/km', studio: 'IV: 4√ó4 min @ 5:40/km. Pause: 2 min Trab. Kraft: Step-Ups 3√ó10, Hamstring Curl 3√ó12 (Maschine), Pallof Press 3√ó12, Lateral Band Walks 3√ó12.', runYoga: '6 km locker + 20 min Yoga', opt: 'BOULDERN (leicht)', note: 'Erste Steigerung der Intervalldauer.' },
            // RDL (sehr leicht) 3√ó12 ersetzt durch Kabelzug-Hip-Hinge 3√ó12 (sehr leicht)
            { id: 3, dist: 12, phase: 'Basis', ll: '12 km @ 7:00‚Äì7:20/km', studio: 'IV: 3√ó5 min @ 5:45/km. Pause: 2 min Trab. Kraft: Leg Press 3√ó12, Kabelzug-Hip-Hinge 3√ó12 (sehr leicht), Latzug 3√ó12, Side Plank 3√ó30 s/Seite.', runYoga: '6 km locker + 25 min Yoga', opt: 'Core Zuhause: Dead Bug, Bird Dog', note: 'Kein Bouldern diese Woche, daf√ºr Core zu Hause.' },
            { id: 4, dist: 13, phase: 'Basis', ll: '13 km @ 6:55‚Äì7:15/km', studio: 'TDL: 3√ó5 min @ 6:15/km (HMP-Tempo). 1 min Trabpause. Kraft: Box Squats 3√ó10, Kabelzug Core 3√ó12, Clamshells 3√ó15.', runYoga: '6 km locker + 25 min Yoga', opt: 'BOULDERN (moderat)', note: 'Erster Tempo-Dauerlauf (TDL) im Zieltempo.' },
            // Phase 2: Volumen
            { id: 5, dist: 14, phase: 'Volumen', ll: '14 km @ 6:55‚Äì7:15/km', studio: 'IV: 3√ó8 min @ 6:00/km (Schwellen-IV). Pause: 3 min Trab. Kraft: Split Squats 3√ó12, Hip Thrust 3√ó10 (schwer), Anti-Rotation 3√ó12.', runYoga: '7 km locker + 25 min Yoga', opt: 'Handstand: 3√ó Wall Walks + Kick-Ups', note: 'L√§ngere Intervalle an der Schwelle.' },
            // RDL (leicht) 3√ó10 ersetzt durch Kabelzug-Hip-Hinge 3√ó10 (leicht)
            { id: 6, dist: 11, phase: 'Volumen', ll: '11 km (Entlastung) @ 7:00/km', studio: 'TDL: 15 min @ 6:10/km (HMP). 5 min Trab. 10 min @ 6:10/km. Kraft: Kabelzug-Hip-Hinge 3√ó10 (leicht), Ruderzug 3√ó12, Lateral Band Walks 3√ó12.', runYoga: '6 km locker + 20 min Mobility', opt: 'BOULDERN (Technik)', note: 'Entlastungswoche. Kraft tanken.' },
            { id: 7, dist: 15, phase: 'Volumen', ll: '15 km @ 6:50‚Äì7:10/km', studio: 'IV: 5√ó4 min @ 5:40/km (mit leichtem Anstieg auf Laufband). 2 min Trabpause. Kraft: Leg Press 3√ó10, Hamstrings 3√ó15, Plank Walkouts 3√ó6.', runYoga: '7 km locker + 30 min Yoga', opt: 'Core Zuhause: Hollow Rocks, Side Plank', note: 'Wir knacken die 15km Marke.' },
            { id: 8, dist: 16, phase: 'Volumen', ll: '16 km @ 6:50‚Äì7:10/km', studio: 'IV: 5√ó5 min 30 s @ 5:45/km. Pause: 3 min Trab. Kraft: Hip Thrust 4√ó8, Latzug 3√ó12, Clamshells 3√ó15.', runYoga: '7 km locker + 30 min Yoga', opt: 'BOULDERN (moderat/schwierig)', note: '50% des Trainings ist geschafft!' },
            // Phase 3: Spezifik
            { id: 9, dist: 17, phase: 'Spezifik', ll: '17 km @ 6:45‚Äì7:05/km', studio: 'TDL: 2√ó10 min @ 6:10/km (HMP). 5 min Trabpause. Kraft: Bulgarian Split Squats 3√ó10 (nur KG!), Rudern 3√ó12, Pallof Press 3√ó12.', runYoga: '8 km locker + 30 min Yoga', opt: 'Handstand: 3√ó30s Wall Hold, Freistand', note: 'Fokus auf Halbmarathon-Pace (HMP).' },
            { id: 10, dist: 18, phase: 'Spezifik', ll: '18 km @ 6:45‚Äì7:05/km', studio: 'IV: 6√ó4 min @ 5:40/km. Pause: 2 min Trab. Kraft: Hip Thrust 4√ó8, Latzug 3√ó12, Lateral Band Walks 3√ó12.', runYoga: '7 km locker + 25 min Yoga', opt: 'BOULDERN (moderat)', note: 'H√∂chstes Volumen n√§hert sich.' },
            { id: 11, dist: 16, phase: 'Spezifik', ll: '16 km (Entlastung) @ 6:50/km', studio: 'Schwellenlauf: 20 min @ 6:00/km. Kraft (Reduziert): Glute Bridge 2√ó15, Planke 2√ó60 s.', runYoga: '7 km locker + 25 min Yoga', opt: 'Core Zuhause: Mobility + Hollow Hold', note: 'Kurze Entlastung vor dem Peak.' },
            // RDL (moderat) 3√ó8 (Technik!) ersetzt durch Kabelzug-Hip-Hinge 3√ó8 (moderat, Fokus Glute)
            { id: 12, dist: 20, phase: 'Peak', ll: '19‚Äì20 km (PEAK) @ 6:40‚Äì7:00/km', studio: 'IV: 4√ó8 min @ 6:15/km (HMP). Pause: 3 min Trab. Kraft: Kabelzug-Hip-Hinge 3√ó8 (moderat, Fokus Glute), Latzug 3√ó12, Side Plank 3√ó45 s.', runYoga: '8 km locker + 30 min Yoga', opt: 'BOULDERN (leicht)', note: 'PEAK WEEK! Der l√§ngste Lauf des Plans. Mental wichtig.' },
            // Phase 4: Taper
            { id: 13, dist: 14, phase: 'Taper', ll: '14 km @ 6:45/km', studio: 'TDL: 10 min @ 6:10/km. 5 min Trab. 5 min schneller (5:50/km). Kraft (Erhaltung): Hip Thrust 2√ó10, Rudern 2√ó10.', runYoga: '6 km locker + 20 min Yoga', opt: '15 Min Mobility (Kein Handstand)', note: 'Tapering beginnt. Umfang reduzieren.' },
            { id: 14, dist: 10, phase: 'Taper', ll: '10 km @ 7:00/km', studio: 'IV: 4√ó2 min @ 5:35/km. Pause: 2 min Gehen. Kraft (Minimalsatz): Glute Bridge 2√ó10, Planke 2√ó45 s.', runYoga: '5 km locker + 15 min Yoga', opt: 'RUHETAG / leichte Mobility', note: 'Beine frisch machen.' },
            { id: 15, dist: 5, phase: 'Taper', ll: '5 km locker', studio: 'Mini-Einheit: 3 km locker, 4 Steigerungen √† 20 s.', runYoga: '3 km locker + 10 min Yoga', opt: 'RUHETAG', note: 'Ruhe ist jetzt das wichtigste Training.' },
            { id: 16, dist: 21.1, phase: 'Race', ll: 'üèÅ HALBMARATHON (Ziel 2:10h)', studio: 'DO: Mini-Lauf: 3 km locker, 2 Steigerungen.', runYoga: 'DI: Mini-Yoga: 10 min Core & H√ºfte.', opt: 'SO: RACE DAY', note: 'Viel Erfolg! Du bist bereit.' }
        ];

        // --- MASTER EXERCISE DETAILS ---
        const exerciseDetails = {
            'Goblet Squat': {
                icon: 'üèãÔ∏è',
                focus: 'Vordere Oberschenkel, Ges√§√ü, Core',
                description: 'Halte eine Kurzhantel senkrecht vor der Brust. Stelle die F√º√üe schulterbreit. Gehe tief in die Hocke, w√§hrend du den R√ºcken gerade h√§ltst und die Ellbogen zwischen die Knie bringst. Knie zeigen leicht nach au√üen. Sehr gut f√ºr die Technik.',
                imageTag: '[Bild von Goblet Squat]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=M5B9vT9-J1k'
            },
            'Hip Thrust': {
                icon: 'üçë',
                focus: 'Ges√§√ümuskulatur (Gluteus Maximus)',
                description: 'Lehne den oberen R√ºcken an eine Bank, F√º√üe stehen flach auf dem Boden. Hebe die H√ºfte, bis dein K√∂rper von den Schultern bis zu den Knien eine gerade Linie bildet. Dr√ºcke die Ges√§√ümuskeln am h√∂chsten Punkt fest zusammen. Die wichtigste √úbung f√ºr L√§ufer.',
                imageTag: '[Bild von Hip Thrust]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=F0f-N3O8jH4'
            },
            'Ruderzug': {
                icon: 'üö£',
                focus: 'Oberer R√ºcken, Latissimus, Bizeps',
                description: 'Setze dich an die Rudermaschine (Kabelzug). Ziehe den Griff zum Bauch, indem du die Schulterbl√§tter zusammenziehst. Lass die Arme nur als "Haken" wirken. Halte den Oberk√∂rper stabil (kein Schwung!).',
                imageTag: '[Bild von Kabelrudern]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=vVjV-7z2uGk'
            },
            'Clamshells': {
                icon: 'üêö',
                focus: 'Ges√§√ümuskulatur (Gluteus Medius), H√ºftstabilit√§t',
                description: 'Lege dich auf die Seite, Knie angewinkelt, F√º√üe zusammen. Halte die F√º√üe zusammen und √∂ffne nur das obere Knie wie eine Muschel. Halte die Bewegung langsam und kontrolliert. Essentiell f√ºr Knie-Pr√§vention.',
                imageTag: '[Bild von Clamshell √úbung]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=03i9-D_5xX8'
            },
            'Step-Ups': {
                icon: 'ü™ú',
                focus: 'Ges√§√ü, Oberschenkel, Einbein-Stabilit√§t',
                description: 'Stell dich vor eine stabile Box/Bank. Steige mit einem Fu√ü auf, dr√ºcke dich durch die Ferse des Standbeins nach oben. Das Bein auf der Box leistet die Hauptarbeit. Langsam und kontrolliert absteigen.',
                imageTag: '[Bild von Hantel Step Ups]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=T_8N_w19i2U'
            },
            'Hamstring Curl': {
                icon: 'ü¶µ',
                focus: 'Hinterer Oberschenkel (Beinbeuger)',
                description: 'In der Maschine: Lege dich auf den Bauch oder setze dich. Beuge die Knie und ziehe die Fersen in Richtung Ges√§√ü. F√ºhre die Bewegung kontrolliert aus, um Kr√§mpfe zu vermeiden. Wichtig f√ºr die Lauf√∂konomie.',
                imageTag: '[Bild von Hamstring Curl Maschine]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=kYJv9v52-c0'
            },
            'Pallof Press': {
                icon: 'üõ°Ô∏è',
                focus: 'Anti-Rotation (Core-Stabilit√§t)',
                description: 'Stehe seitlich zu einem Kabelzug oder Widerstandsband. Ziehe den Griff zur Brust und dr√ºcke ihn dann langsam geradeaus. Der K√∂rper darf sich dabei nicht zur Seite drehen (Anti-Rotation!). Perfekt f√ºr den LW1-Schutz.',
                imageTag: '[Bild von Pallof Press]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=kP_u2510_8E'
            },
            'Lateral Band Walks': {
                icon: 'ü¶Ä',
                focus: 'Gluteus Medius, H√ºftabduktoren',
                description: 'Platziere ein Miniband um die Knie oder Kn√∂chel. Gehe in eine leichte Hocke. Mache kleine, seitliche Schritte. Achte darauf, dass die Knie nicht nach innen fallen. H√§lt die Knie-Achse stabil.',
                imageTag: '[Bild von Lateral Band Walks]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=Xh5hQv6w3-o'
            },
            'Leg Press': {
                icon: 'ü¶ø',
                focus: 'Vordere Oberschenkel (Quadrizeps), Ges√§√ü',
                description: 'Setz dich in die Beinpresse. F√º√üe schulterbreit mittig platzieren. Dr√ºcke das Gewicht weg, bis die Beine fast gestreckt sind (Knie nicht durchdr√ºcken!). Lasse das Gewicht langsam wieder ab. Gute Erg√§nzung zu freien Kniebeugen.',
                imageTag: '[Bild von Beinpresse]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=P11m5p0pYwY'
            },
            'Kabelzug-Hip-Hinge': {
                icon: 'üîó',
                focus: 'Ges√§√ümuskulatur, Hamstrings (H√ºftstreckung)',
                description: 'Stelle dich mit dem R√ºcken zum Kabelzug (tiefster Punkt), befestige ein Seil. Gehe in eine leichte Kniebeuge und lasse die H√ºfte nach hinten klappen (Hinge). Halte den R√ºcken kerzengerade! Bringe die H√ºfte explosiv nach vorne und spanne das Ges√§√ü am Ende maximal an. **Dies ist eine extrem sichere Alternative zum Kreuzheben ohne Belastung auf die Wirbels√§ule.**',
                imageTag: '[Bild von Kabelzug Hip Hinge]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=S8L3k0zT95w'
            },
            'Latzug': {
                icon: '‚õ∞Ô∏è',
                focus: 'Latissimus (breiter R√ºckenmuskel), Bizeps',
                description: 'Setze dich an die Latzugmaschine. Greife die Stange etwas breiter als schulterbreit. Ziehe die Stange zur oberen Brust, indem du die Schulterbl√§tter nach unten und hinten ziehst. Lass die Arme nur als "Haken" wirken. Nicht mit dem Oberk√∂rper schwingen.',
                imageTag: '[Bild von Latzug √úbung]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=yYyK9GvQd1U'
            },
            'Side Plank': {
                icon: '‚ÜîÔ∏è',
                focus: 'Seitliche Bauchmuskeln, Core-Stabilit√§t',
                description: 'St√ºtze dich auf einem Unterarm und der Au√üenseite eines Fu√ües ab. Hebe die H√ºfte, bis der K√∂rper eine gerade Linie bildet. Halte diese Position. Essentiell f√ºr Anti-Seitenbeugung und LW1-Schutz.',
                imageTag: '[Bild von Seitst√ºtz]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=k_lR7jH0gQY'
            },
            'Box Squats': {
                icon: 'ü™ë',
                focus: 'Ges√§√ü, Oberschenkel, Tiefenkontrolle',
                description: 'Eine Kniebeuge mit einer Box/Bank als Ziel. Hocke dich langsam ab, bis du die Box kurz ber√ºhrst, und dr√ºcke dich dann wieder nach oben. Hilft, die Tiefe zu kontrollieren und die H√ºfte aktiv einzusetzen.',
                imageTag: '[Bild von Box Squat]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=sI9f-hK4v9M'
            },
            'Kabelzug Core': {
                icon: 'üîÑ',
                focus: 'Core-Stabilit√§t (Anti-Rotation/Anti-Flexion)',
                description: 'Dies ist eine Variante der Pallof Press oder eine Anti-Flexions-√úbung. F√ºhre kontrollierte Bewegungen gegen den Widerstand des Kabels aus, ohne dass dein Rumpf nachgibt.',
                imageTag: '[Bild von Kabelzug Core Rotation]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=kP_u2510_8E' // Using Pallof Press as example
            },
            'Split Squats': {
                icon: 'üö∂',
                focus: 'Einbein-St√§rke, Ges√§√ü, Balance',
                description: 'Ein Ausfallschritt, bei dem der hintere Fu√ü stabil bleibt. Senke die H√ºfte, bis das hintere Knie fast den Boden ber√ºhrt. Achte darauf, dass das vordere Knie nicht nach innen kippt.',
                imageTag: '[Bild von Split Squat]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=5V920h795H4'
            },
            'Anti-Rotation': {
                icon: 'üö´',
                focus: 'Core-Stabilit√§t (Anti-Rotation)',
                description: 'Dieser Begriff steht f√ºr √úbungen wie die Pallof Press. Das Ziel ist, dass der Rumpf jegliche Rotation aktiv verhindert. Halte den Bauch fest und bewege nur die Extremit√§ten gegen den Widerstand.',
                imageTag: '[Bild von Anti-Rotations-√úbung Core]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=kP_u2510_8E' // Using Pallof Press as example
            },
            'Plank Walkouts': {
                icon: 'üêæ',
                focus: 'Core-Stabilit√§t (Anti-Extension), Schultern',
                description: 'Beginne im Stehen. Gehe mit den H√§nden nach vorne, bis du in einer Plank-Position bist, und laufe dann langsam mit den H√§nden so weit wie m√∂glich nach vorne, ohne im unteren R√ºcken durchzuh√§ngen. Gehe zur√ºck.',
                imageTag: '[Bild von Plank Walkouts]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=zR3tG34c1w0'
            },
            'Bulgarian Split Squats': {
                icon: 'üáßüá¨',
                focus: 'Einbein-St√§rke, Ges√§√ü, Oberschenkel',
                description: 'Stelle den hinteren Fu√ü erh√∂ht auf einer Bank ab. Senke die H√ºfte tief ab. Diese √úbung ist sehr fordernd f√ºr Balance und Kraft. Beginne unbedingt nur mit deinem K√∂rpergewicht (KG!).',
                imageTag: '[Bild von Bulgarian Split Squat]',
                isPreventive: false,
                videoUrl: 'https://www.youtube.com/watch?v=S21cR7i278c'
            },
            'Glute Bridge': {
                icon: 'üåâ',
                focus: 'Ges√§√ü, hinterer Oberschenkel',
                description: 'Lege dich auf den R√ºcken, Knie angewinkelt. Hebe die H√ºfte vom Boden ab, bis Schultern, H√ºfte und Knie eine Linie bilden. Dr√ºcke das Ges√§√ü fest zusammen. Eine sanfte, aber effektive √úbung.',
                imageTag: '[Bild von Glute Bridge]',
                isPreventive: true,
                videoUrl: 'https://www.youtube.com/watch?v=W0-h30PqS2Q'
            }
        };

        let currentWeekId = 1;

        // --- CORE INTERACTION HANDLING ---

        function init() {
            renderTimeline();
            renderWeekDetail(currentWeekId);
            initCharts();
        }

        function scrollToSection(id) {
            // Sicherstellen, dass das Element existiert, bevor scrollIntoView aufgerufen wird.
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            } else {
                console.error(`Element mit ID "${id}" nicht gefunden.`);
            }
        }

        // --- TIMELINE LOGIC ---
        function renderTimeline() {
            const container = document.querySelector('.timeline-scroll');
            container.innerHTML = '';

            weeksData.forEach(week => {
                const btn = document.createElement('button');
                const isSelected = week.id === currentWeekId;
                
                // Styling based on state
                let baseClasses = "flex-shrink-0 w-16 h-20 rounded-lg flex flex-col items-center justify-center transition-all duration-200 border-2 snap-start ";
                if (isSelected) {
                    baseClasses += "bg-teal-600 border-teal-600 text-white shadow-lg scale-105";
                } else if ([6, 11].includes(week.id)) { // Deload weeks
                    baseClasses += "bg-green-50 border-green-200 text-green-700 hover:border-teal-400";
                } else if (week.id === 12) { // Peak
                    baseClasses += "bg-purple-50 border-purple-200 text-purple-700 hover:border-teal-400";
                } else if (week.id === 16) { // Race
                    baseClasses += "bg-yellow-50 border-yellow-200 text-yellow-700 hover:border-teal-400";
                } else {
                    baseClasses += "bg-white border-stone-200 text-stone-600 hover:border-teal-400";
                }

                btn.className = baseClasses;
                btn.innerHTML = `
                    <span class="text-xs uppercase font-bold mb-1">W${week.id}</span>
                    <span class="text-xs font-semibold">${week.id === 16 ? 'üèÅ' : week.dist + 'k'}</span>
                `;
                btn.onclick = () => {
                    currentWeekId = week.id;
                    renderTimeline(); // Re-render to update active state
                    renderWeekDetail(week.id);
                };
                container.appendChild(btn);
            });
        }

        // --- WEEK DETAIL LOGIC ---
        function renderWeekDetail(id) {
            const week = weeksData.find(w => w.id === id);
            const container = document.getElementById('week-detail-container');
            
            // Animation reset
            container.style.opacity = '0';
            
            setTimeout(() => {
                let headerColor = "bg-stone-800";
                let badgeText = week.phase;
                
                if(week.id === 6 || week.id === 11) { badgeText = "Entlastung"; headerColor = "bg-green-600"; }
                if(week.id === 12) { badgeText = "PEAK WEEK"; headerColor = "bg-purple-600"; }
                if(week.id >= 13 && week.id <= 15) { badgeText = "Tapering"; headerColor = "bg-indigo-500"; }
                if(week.id === 16) { badgeText = "RACE WEEK"; headerColor = "bg-yellow-500 text-stone-900"; }

                const isRaceWeek = week.id === 16;
                const studioContentHtml = formatStudioContent(week.studio);

                let html = `
                    <div class="${headerColor} p-6 text-white flex justify-between items-center">
                        <div>
                            <div class="flex items-center gap-3">
                                <h3 class="text-3xl font-bold">Woche ${week.id}</h3>
                                <span class="px-3 py-1 bg-white/20 rounded-full text-xs font-bold uppercase tracking-wide backdrop-blur-sm">${badgeText}</span>
                            </div>
                            <p class="mt-2 text-white/90 text-sm max-w-xl">${week.note}</p>
                        </div>
                        <div class="hidden md:block text-right">
                            <div class="text-xs uppercase opacity-75">Wochen-Highlight</div>
                            <div class="text-2xl font-bold">${isRaceWeek ? '21.1 km' : week.ll.split('@')[0]}</div>
                        </div>
                    </div>
                    
                    <div class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- Sunday: Long Run -->
                        <div class="p-4 rounded-lg bg-stone-50 border border-stone-200 hover:border-teal-300 transition-colors group">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-xl group-hover:scale-110 transition-transform">üêå</span>
                                <h4 class="font-bold text-stone-800">Sonntag (LL)</h4>
                            </div>
                            <div class="text-sm font-semibold text-teal-700 mb-1">Langer Dauerlauf</div>
                            <p class="text-sm text-stone-600">${week.ll}</p>
                        </div>

                        <!-- Studio Session -->
                        <div class="p-4 rounded-lg bg-stone-50 border border-stone-200 hover:border-teal-300 transition-colors group lg:col-span-2">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-xl group-hover:scale-110 transition-transform">üèãÔ∏è‚Äç‚ôÄÔ∏è</span>
                                <h4 class="font-bold text-stone-800">Studio: Lauf & Kraft</h4>
                            </div>
                            ${studioContentHtml}
                            ${week.id <= 12 && week.studio.includes('Kraft:') ? '<p class="mt-4 text-xs text-orange-600 font-medium border-t border-orange-100 pt-2">‚ö† Knie-Pr√§vention: Die Glute-√úbungen sind Pflicht und k√∂nnen als Warm-up dienen!</p>' : ''}
                        </div>

                        <!-- Easy Run & Yoga -->
                        <div class="p-4 rounded-lg bg-stone-50 border border-stone-200 hover:border-teal-300 transition-colors group">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-xl group-hover:scale-110 transition-transform">üßò‚Äç‚ôÄÔ∏è</span>
                                <h4 class="font-bold text-stone-800">Do/Fr</h4>
                            </div>
                            <div class="text-sm font-semibold text-teal-700 mb-1">Lauf + Yoga</div>
                            <p class="text-sm text-stone-600">${week.runYoga}</p>
                        </div>

                        <!-- Optional / Passion -->
                        <div class="p-4 rounded-lg bg-stone-50 border border-stone-200 hover:border-teal-300 transition-colors group">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-xl group-hover:scale-110 transition-transform">${week.opt.includes('BOULDERN') ? 'üßó‚Äç‚ôÄÔ∏è' : week.opt.includes('Handstand') ? 'ü§∏' : 'üè†'}</span>
                                <h4 class="font-bold text-stone-800">4. Einheit (Opt.)</h4>
                            </div>
                            <div class="text-sm font-semibold text-teal-700 mb-1">${week.opt.includes('BOULDERN') ? 'Bouldern' : 'Home / Flexibel'}</div>
                            <p class="text-sm text-stone-600">${week.opt}</p>
                        </div>
                    </div>
                `;

                container.innerHTML = html;
                container.style.opacity = '1';

                // Render the new exercise guide for the current week
                renderExerciseGuide(week);
            }, 200);
        }

        // Helper function to format Studio Content
        function formatStudioContent(content) {
            const parts = content.split('Kraft:');
            const running = parts[0].trim().replace(/\.$/, ''); // Remove trailing dot
            
            // Running component
            let html = `<p class="text-xs uppercase font-semibold text-stone-500">Lauf-Komponente (IV / TDL):</p>
                        <p class="text-sm text-stone-700 mb-4">${running}</p>`;
            
            // Strength component
            if (parts.length > 1 && parts[1].trim()) {
                const strengthItems = parts[1].trim().split(',').map(item => item.trim());
                
                html += `<p class="text-xs uppercase font-semibold text-stone-500 mt-3">Kraft√ºbungen:</p>
                        <ul class="text-sm text-stone-700 space-y-1">`;
                
                strengthItems.forEach(item => {
                    if (item) {
                        const text = item.replace(/\.$/, '');
                        const display = text.includes('Clamshells') || text.includes('Lateral Band Walks') || text.includes('Pallof Press') || text.includes('Planke') || text.includes('Side Plank') || text.includes('Core') || text.includes('Glute Bridge') || text.includes('Kabelzug-Hip-Hinge') ? 
                                        `<span class="text-teal-600 font-semibold">${text}</span>` : text;
                        html += `<li class="flex items-start">
                                    <span class="mr-2 text-stone-400">‚Ä¢</span>
                                    <span>${display}</span>
                                 </li>`;
                    }
                });
                
                html += `</ul>`;
            } else if (content.includes('Mini-Einheit') || content.includes('DO: Mini-Lauf')) {
                // Handle Taper/Race weeks which might only have running/mini-runs
                html = `<p class="text-sm text-stone-700">${content}</p>`;
            }
            
            return html;
        }
        
        // --- NEW: EXERCISE GUIDE LOGIC ---
        
        function getExercisesForWeek(week) {
            const exerciseList = [];
            const studioPart = week.studio.split('Kraft:');
            
            if (studioPart.length > 1) {
                // Extract all exercise names, ignoring sets/reps (e.g., '3x12')
                const rawExercises = studioPart[1].trim().replace(/\.$/, '').split(',');
                
                rawExercises.forEach(item => {
                    // Clean up string to just get the exercise name (e.g., "Goblet Squat 3x12" -> "Goblet Squat")
                    let name = item.trim().split(' ')[0];
                    let key = Object.keys(exerciseDetails).find(k => item.trim().includes(k));

                    // Special handling for compound names
                    if (!key) {
                        if (item.trim().includes('Kabelzug-Hip-Hinge')) {
                            key = 'Kabelzug-Hip-Hinge';
                        } else if (item.trim().includes('Glute Bridge')) {
                            key = 'Glute Bridge';
                        } else if (item.trim().includes('Kabelzug Core')) {
                            key = 'Kabelzug Core';
                        }
                    }

                    if (key && !exerciseList.some(e => e.name === key)) {
                        exerciseList.push({
                            name: key,
                            ...exerciseDetails[key]
                        });
                    }
                });
            }
            return exerciseList;
        }

        function renderExerciseGuide(week) {
            const guideContainer = document.getElementById('exercise-guide-cards');
            const weekNumberSpan = document.getElementById('guide-week-number');
            
            weekNumberSpan.textContent = week.id;

            const exercises = getExercisesForWeek(week);
            
            if (exercises.length === 0) {
                guideContainer.innerHTML = `
                    <div class="md:col-span-2 p-6 bg-yellow-50 text-yellow-800 rounded-xl border border-yellow-200">
                        <p class="font-semibold">Keine detaillierten Kraft√ºbungen in dieser Woche.</p>
                        <p class="text-sm mt-1">W√§hrend der Entlastungs- und Tapering-Phasen (ab Woche 13) ist der Fokus auf Ruhe und minimale Erhaltung.</p>
                    </div>
                `;
                return;
            }

            let html = '';
            exercises.forEach(ex => {
                const color = ex.isPreventive ? 'border-teal-400 bg-teal-50' : 'border-stone-300 bg-white';
                const shadow = ex.isPreventive ? 'shadow-md shadow-teal-100' : 'shadow-sm';

                html += `
                    <div class="p-5 rounded-xl border-2 ${color} ${shadow}">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h4 class="text-xl font-bold text-stone-800">${ex.icon} ${ex.name}</h4>
                                <span class="text-xs font-medium ${ex.isPreventive ? 'text-teal-700' : 'text-stone-500'}">${ex.focus}</span>
                            </div>
                            ${ex.isPreventive ? '<span class="text-xs px-2 py-1 bg-teal-200 text-teal-800 rounded-full font-bold">PR√ÑVENTION</span>' : ''}
                        </div>
                        <p class="text-sm text-stone-700 mb-4">${ex.description}</p>
                        
                        <!-- Video Link -->
                        <div class="w-full text-center">
                            <a href="${ex.videoUrl}" target="_blank" class="text-sm font-semibold text-teal-600 hover:text-teal-800 transition flex items-center justify-center gap-1 bg-gray-100 p-2 rounded-lg mt-3 border border-gray-200 hover:bg-gray-200">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                                    <path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.348 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 20.322c-1.25.705-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd" />
                                </svg>
                                Video-Anleitung ansehen
                            </a>
                        </div>
                    </div>
                `;
            });

            guideContainer.innerHTML = html;
        }


        // --- CHARTS LOGIC ---
        function initCharts() {
            // 1. Long Run Progression Line Chart
            const ctxLongRun = document.getElementById('longRunChart').getContext('2d');
            
            // Extract distances (parse "10 km..." to 10)
            const labels = weeksData.map(w => `W${w.id}`);
            const dataPoints = weeksData.map(w => w.id === 16 ? 21.1 : parseFloat(w.dist));

            new Chart(ctxLongRun, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Distanz (km)',
                        data: dataPoints,
                        borderColor: '#0D9488', // teal-600
                        backgroundColor: 'rgba(13, 148, 136, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.3,
                        pointBackgroundColor: weeksData.map(w => w.id === 12 ? '#9333EA' : '#0D9488'), // Purple for Peak
                        pointRadius: weeksData.map(w => w.id === 12 ? 6 : 4)
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + ' km - ' + (context.dataIndex === 11 ? 'Peak Week' : context.dataIndex === 15 ? 'Race' : 'Aufbau');
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: '#E7E5E4' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });

            // 2. Pace Zones Bar Chart
            const ctxPace = document.getElementById('paceChart').getContext('2d');
            new Chart(ctxPace, {
                type: 'bar',
                data: {
                    labels: ['Langer Lauf (LL)', 'Halbmarathon (Ziel)', 'Intervalle (IV)'],
                    datasets: [{
                        label: 'Pace (min/km)',
                        data: [7.25, 6.15, 5.5], // Average values used for viz
                        backgroundColor: [
                            '#A8A29E', // Stone (Slow)
                            '#0D9488', // Teal (Goal)
                            '#F97316'  // Orange (Fast)
                        ],
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal Bar Chart
                    scales: {
                        x: {
                            min: 5,
                            max: 8,
                            title: { display: true, text: 'min/km (Langsamer ->)' },
                            grid: { color: '#E7E5E4' }
                        },
                        y: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if(context.dataIndex === 0) return '7:00‚Äì7:30 (Plaudertempo!)';
                                    if(context.dataIndex === 1) return '6:05‚Äì6:15 (Wettkampf)';
                                    if(context.dataIndex === 2) return '5:30‚Äì5:45 (VO2max)';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Init App
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
